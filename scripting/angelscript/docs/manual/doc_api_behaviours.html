<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>AngelScript: Type behaviours</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="contents">
<h1><a class="anchor" name="doc_api_behaviours">Type behaviours </a></h1><h2><a class="anchor" name="mathop">
Math operators</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5c6561fa80f3a974fcd23c7550f31a29c">asBEHAVE_ADD</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bf1f056bf948ae2bad874ba54d5fc00b">asBEHAVE_SUBTRACT</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5a1ef2b72c8bc5c4261125569709e5360">asBEHAVE_MULTIPLY</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c52613ce3b8e32f1535b33521f93f28961">asBEHAVE_DIVIDE</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bbd8e028faac9994da0b288c94766db2">asBEHAVE_MODULO</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5311cec2a716603bcafd3a4eb754e9d0b">asBEHAVE_NEGATE</a></li></ul>
<p>
All of these, with exception to asBEHAVE_NEGATE, should be registered with two parameters using <a class="el" href="classas_i_script_engine.html#d31ce9e99c4cab49892eb4ad5d57e0bb">asIScriptEngine::RegisterGlobalBehaviour</a>. asBEHAVE_NEGATE should be registered with no parameters using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>.<p>
<div class="fragment"><pre class="fragment"><span class="comment">// Example ADD behaviour for a value type</span>
value operator+(<span class="keyword">const</span> value &amp;a, <span class="keyword">const</span> value &amp;b)
{
    <span class="comment">// Perform the add operation and return the new value</span>
    value result;
    result.attr = a.attr + b.attr;
    <span class="keywordflow">return</span> result;
}

<span class="comment">// Example registration of the behaviour</span>
r = engine-&gt;RegisterGlobalBehaviour(<a class="code" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5c6561fa80f3a974fcd23c7550f31a29c" title="(Global) operator +">asBEHAVE_ADD</a>, <span class="stringliteral">"value f(const value &amp;in, const value &amp;in)"</span>, <a class="code" href="angelscript_8h.html#153aee5a6228913a469b6e6867e54efb" title="Returns an asSFuncPtr representing the function specified by the name, parameter...">asFUNCTIONPR</a>(<span class="keyword">operator</span>+, (<span class="keyword">const</span> value&amp;,<span class="keyword">const</span> value&amp;), value), <a class="code" href="angelscript_8h.html#3ec92ea3c4762e44c2df788ceccdd1e468ae43cc91cdfc3fa4590c9e6164e4f4" title="A cdecl function.">asCALL_CDECL</a>); assert( r &gt;= 0 );
</pre></div><h2><a class="anchor" name="compop">
Comparison operators</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c534ddc9fa970b91e472e7449a041a24ad">asBEHAVE_EQUAL</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5ec483ab4eaff308b2e039b958cdf7f82">asBEHAVE_NOTEQUAL</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c552999348422274866dfff5038b95b500">asBEHAVE_LESSTHAN</a>,</li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5ba842be8c65b6e352ebc3f7a6ee59a52">asBEHAVE_GREATERTHAN</a>,</li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c536d15f82ede2360bafba085da39e7af9">asBEHAVE_LEQUAL</a>,</li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5438c8aad575240aee4ea173c0b3626a7">asBEHAVE_GEQUAL</a></li></ul>
<p>
These should be registered with two parameters using <a class="el" href="classas_i_script_engine.html#d31ce9e99c4cab49892eb4ad5d57e0bb">asIScriptEngine::RegisterGlobalBehaviour</a>. All of them should return a bool type.<h2><a class="anchor" name="bitop">
Bitwise operators</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c502258e6486e3e5915ce4afd2970fbfe8">asBEHAVE_BIT_OR</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5d958c1909e5fd1f1fbe22f61e87c2a7b">asBEHAVE_BIT_AND</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5a4d4c41c388552ee02a9f9fd36a459bc">asBEHAVE_BIT_XOR</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c54a2ed5480cdc01af3b5dc8439178e634">asBEHAVE_BIT_SLL</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c56951ef9363bdb4678c6cec0eb6edd0bf">asBEHAVE_BIT_SRL</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5cc6e63265fe208ae899c5da4d928f380">asBEHAVE_BIT_SRA</a></li></ul>
<p>
These should be registered with two parameters using <a class="el" href="classas_i_script_engine.html#d31ce9e99c4cab49892eb4ad5d57e0bb">asIScriptEngine::RegisterGlobalBehaviour</a>.<h2><a class="anchor" name="assignop">
Assignment operators</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bc550883ee918a9df8aef130aa9c567c">asBEHAVE_ASSIGNMENT</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5646b967d765edfa361e15e34f6ba9597">asBEHAVE_ADD_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bfb526cf8ca1c9775e9c17b91c169822">asBEHAVE_SUB_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5e5d087a7823cc3277b5b657f986c52d8">asBEHAVE_MUL_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c51333bd580dcaac17e9825e001d303d73">asBEHAVE_DIV_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5756dac7549118364c0cd0fe9507dabd5">asBEHAVE_MOD_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c51f35e93e5beb17ea58f100ce36e21616">asBEHAVE_OR_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c584fc8346274cc6de28b45539cce0b8dc">asBEHAVE_AND_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c512d677c4dc0f106040f8ce5003cc0d61">asBEHAVE_XOR_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c58153841050a78b6cd98a5a570f1ea2d4">asBEHAVE_SLL_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c55cdef028b5be18bef7bf2608b523d3d2">asBEHAVE_SRL_ASSIGN</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5a696d07bfbdbba9fa6ac59977b043f5e">asBEHAVE_SRA_ASSIGN</a></li></ul>
<p>
All of these should be registered with one parameter using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>. Preferably the functions should return a reference to the object itself.<p>
<div class="fragment"><pre class="fragment"><span class="comment">// Example ASSIGNMENT behaviour for a reference type</span>
<span class="keywordtype">object</span> &amp;object::operator=(<span class="keyword">const</span> <span class="keywordtype">object</span> &amp;other)
{
    <span class="comment">// Copy only the buffer, not the reference counter</span>
    attr = other.attr;

    <span class="comment">// Return a reference to this object</span>
    <span class="keywordflow">return</span> *<span class="keyword">this</span>;
}

<span class="comment">// Example registration of the behaviour</span>
r = engine-&gt;RegisterObjectBehaviour(<span class="stringliteral">"object"</span>, <a class="code" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bc550883ee918a9df8aef130aa9c567c" title="(Object) operator =">asBEHAVE_ASSIGNMENT</a>, <span class="stringliteral">"object &amp;f(const object &amp;in)"</span>, <a class="code" href="angelscript_8h.html#c45ccb5854326cce38d721e2c00f1563" title="Returns an asSFuncPtr representing the class method specified by class, method name...">asMETHODPR</a>(<span class="keywordtype">object</span>, <span class="keyword">operator</span> =, (<span class="keyword">const</span> <span class="keywordtype">object</span>&amp;), <span class="keywordtype">object</span>&amp;), <a class="code" href="angelscript_8h.html#3ec92ea3c4762e44c2df788ceccdd1e4ea516c8742acc1edff6a43dc1bb09e96" title="A thiscall class method.">asCALL_THISCALL</a>); assert( r &gt;= 0 );
</pre></div><h2><a class="anchor" name="idxop">
Index operator</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5cf1a9ac617fd1558ad3726e9ecc09b0b">asBEHAVE_INDEX</a></li></ul>
<p>
This behaviour should be registered with one parameter using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>.<h2><a class="anchor" name="castop">
Cast operators</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5e0b54db9bbd5bf49d0e22cafd886b833">asBEHAVE_VALUE_CAST</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c503d72ae8d0f1e1b4e16f903346a694c6">asBEHAVE_IMPLICIT_VALUE_CAST</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c520746394824509f369f860ea1e96d1f6">asBEHAVE_REF_CAST</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c59b23cc523e8aa4984e5e56e54b95dee4">asBEHAVE_IMPLICIT_REF_CAST</a></li></ul>
<p>
asBEHAVE_VALUE_CAST and asBEHAVE_IMPLICIT_VALUE_CAST must be registered without parameters using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>. The return type can be any type, except bool and void. The value cast allows explicit casts through construct calls, whereas the implicit value cast also allow the compiler to implicitly use the behaviour to convert expressions as necessary. The value cast behaviours are meant to create a new value so the function must not return a reference or handle to the original value.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5a4cf235bfbf72ec03d0f651cea324101" title="(Object) Constructor">asBEHAVE_CONSTRUCT</a> and <a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c50b3db16eea35213b6f41f8d19dc1bd4c" title="(Object) Factory">asBEHAVE_FACTORY</a> in <a class="el" href="doc_api_behaviours.html#memmgmt">Memory management</a> as well for an alternative value cast operator.</dd></dl>
asBEHAVE_REF_CAST and asBEHAVE_IMPLICIT_REF_CAST must be registered with one parameter using <a class="el" href="classas_i_script_engine.html#d31ce9e99c4cab49892eb4ad5d57e0bb">asIScriptEngine::RegisterGlobalBehaviour</a>. The parameter must be an object handle, as must the return type. The only difference between the two is that the script compiler may use the later for implicit casts, while the former can only be used by explicitly calling the cast operator. This distinction is very useful when registering class hierarchies, where cast to a base class usually is registered with an implicit cast, whereas a cast to a derived class usually is registered with an explicit cast.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="doc_adv_class_hierarchy.html">Registering class hierarchies</a></dd></dl>
<h2><a class="anchor" name="memmgmt">
Memory management</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5a4cf235bfbf72ec03d0f651cea324101">asBEHAVE_CONSTRUCT</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c50748a0f3a559354761ce15c2d1de2e51">asBEHAVE_DESTRUCT</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c50b3db16eea35213b6f41f8d19dc1bd4c">asBEHAVE_FACTORY</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c51dfa5b72ad69a7bf70636d4fcb1b1d84">asBEHAVE_ADDREF</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c57134ce13c81967191af401a1e5170a0c">asBEHAVE_RELEASE</a></li></ul>
<p>
These must be registered using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>. asBEHAVE_CONSTRUCT and asBEHAVE_FACTORY may take parameters for object initialization, but the others shouldn't use parameters.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="doc_register_type.html">Registering an object type</a> for more information on how to register types.</dd></dl>
<h2><a class="anchor" name="gcmgmt">
Garbage collection</a></h2>
<ul>
<li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5f998529f8ea1e54567997b8fb2867640">asBEHAVE_GETREFCOUNT</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5adbad474a338c3a0fe6e90df679bb2e6">asBEHAVE_SETGCFLAG</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c5bfce2539609e667f15b24bbc8551c7b7">asBEHAVE_GETGCFLAG</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c508ccf78a37567b5dd192ff5d95c6667b">asBEHAVE_ENUMREFS</a></li><li><a class="el" href="angelscript_8h.html#7e38df5b10ec8cbf2a688f1d114097c54275ebe0b4852f2d4a10d4d9db333fe9">asBEHAVE_RELEASEREFS</a></li></ul>
<p>
These behaviours are exclusive for objects that have been registered with the flag <a class="el" href="angelscript_8h.html#855d86fa9ee15b9f75e553ee376b5c7acc1d835f9c25043cef86026a4aa6a470">asOBJ_GC</a>. All of them should be registered using <a class="el" href="classas_i_script_engine.html#7ea3c93dea338b0287027de0e4895dcb">asIScriptEngine::RegisterObjectBehaviour</a>.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="doc_gc_object.html">Implementing a garbage collected object</a> for more information on using these. </dd></dl>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat May 9 14:45:54 2009 for AngelScript by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
