<H1><FONT color="#414141"><STRONG>Frequently Asked Questions: Windows</STRONG></FONT></H1>
<BR>
<BLOCKQUOTE><H3>Table Of Contents</H3>
<UL>
<LI><A href="#38">What is supported?</A>
<LI><A href="#39">I'm running Windows 2000 and I can't copy SDL.dll!</A>
<LI><A href="#40">Can I build SDL for Windows CE?</A>
<LI><A href="#41">How do I use SDL with Visual C++?</A>
<LI><A href="#43">When using Visual C++ I get link errors relating to MSVCRT.LIB or LIBC</A>
<LI><A href="#63">When using Visual C++ 5, I get the following error message: SDL.lib : fatal error LNK1106: invalid file or disk full</A>
<LI><A href="#44">Why can't I use Visual C++ debugger with SDL applications?</A>
<LI><A href="#72">Why does the Visual C++ debugger freeze at every breakpoint when debugging SDL apps?</A>
<LI><A href="#46">How do I use SDL with Borland C++?</A>
<LI><A href="#42">How do I use SDL with gcc on Windows?</A>
<LI><A href="#47">How do I use SDL with Dev-C++?</A>
<LI><A href="#69">How do I use SDL with CodeWarrior for Windows?</A>
<LI><A href="#48">I get "Undefined reference to 'SDL_main'" ...</A>
<LI><A href="#58">I get "Undefined reference to 'WinMain@16'"</A>
<LI><A href="#79">Why doesn't SDL_WM_ToggleFullScreen() work on Windows?</A>
</UL>
<HR width="100%">
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=38><B>What is supported?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>SDL supports Windows 95/98/NT/ME/2000/XP.
<p>
SDL can be built with Visual C++, Borland C++, Cygwin, MinGW, Dev-C++, and Watcom C++.
<p>
SDL takes advantage of DirectX hardware acceleration when it is available, but falls back to the standard Win32 services if DirectX is not installed.
</p></TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=39><B>I'm running Windows 2000 and I can't copy SDL.dll!</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>For some reason, archives created on Linux have the "Encrypted" property set when unpacked on Windows 2000.  This can be unset by pushing Advanced from the General tab of the properties window and unchecking Encrypt contents checkbox.  The files can then be copied normally.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=40><B>Can I build SDL for Windows CE?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>SDL is not officially supported on Windows CE, but some people have successfully built and run SDL applications on Windows CE.
<p>
SDL 1.2.5 and newer contain project files and information on building SDL for Windows CE.  Take a look at the file README.WinCE in the source archive for more information.
</p></TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=41><B>How do I use SDL with Visual C++?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>Read the file "VisualC.html" included with both the SDL Visual C++ development archive, and the SDL source archive.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=43><B>When using Visual C++ I get link errors relating to MSVCRT.LIB or LIBC</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>SDL is dynamically linked with the multi-threaded version of the Microsoft Visual C runtime. You need to edit your project settings, go to the C++ language tab, change the listbox to "Code Generation" settings, and then change the runtime library to "Multi-threaded DLL".  Make sure you do this with all projects that you link into your application.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=63><B>When using Visual C++ 5, I get the following error message: SDL.lib : fatal error LNK1106: invalid file or disk full</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>This happens with Visual C++ 5, if you use the prebuilt SDL library and
have not updated to the latest service pack.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=44><B>Why can't I use Visual C++ debugger with SDL applications?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>You need to pass the SDL_INIT_NOPARACHUTE flag to your calls to SDL_Init() to make the msvc debugger work.  Otherwise the debugger will be unable to trace exceptions, and other debugging features like run to cursor won't work.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=72><B>Why does the Visual C++ debugger freeze at every breakpoint when debugging SDL apps?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>The DirectX drivers have a system lock while you have video surfaces locked.  To avoid this, you can set the video driver to GDI by setting the SDL_VIDEODRIVER environment variable to: windib
<br>
Since this changes video and mouse/keyboard input drivers, you'll see a difference in performance and features available, but you'll be able to debug your application more easily.
</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=46><B>How do I use SDL with Borland C++?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>SDL 1.2.5 and newer have projects for C++ Builder 5 and 6 for Windows, Kylix 3, and the free Borland C++ command line tools.  Take a look at Borland.html in the source archive.
<p>
Martin Bickel writes:<br>
For both Watcom C/C++ and Borland C/C++ the compiler option that makes enums having the size of an int must be enabled. This is "-b" for Borland C/C++ and "-ei" for Watcom C/C++ (v11).
<p>
Chris Dion wrote down his steps on building manually with the free command line tools:
<br>
<ol>
<li> Run the IMPLIB utility on SDL.DLL to make a new SDL.LIB import library. Use the -a and -c switches.
</li>
<li> You still need the SDL_MAIN.LIB file, so that you don't need to define WinMain() and all that junky windows stuff.  You have no .dll file to build this .lib from, and COFF2OMF creates a empty .lib (you can check with TDUMP, another utillity that comes with the compiler).  Get the Win32 version of the SDL_main.c file from the source, and dump it in with the
rest of your project.
</li>
<li> Compile your source (including SDL_main.c) into object files using BCC32 with the following compiler options:
<br>
  <code>-c</code> (Don't link)<br>
  <code>-tW</code> (Create windows app)<br>
  <code>-DWIN32</code> (Define WIN32, this is needed in the SDL_main.h file, and maybe others)
</li>
<li> Link the.obj files together using ILINK32 with the following options:
<br>
  <code>-aa</code> (Create windows app, sounds redundant, but...)<br>
  <code>-Tpe</code> (Target = windows exe)<br>
  <code>-c</code> (case sensitive linking, may be the default...)<br>
and the following additional files (order is important)
<ul>
 <li> <code>sdl.lib</code> (created in step 1)</li>
 <li> <code>import32.lib</code></li>
 <li> <code>c0w32.obj</code></li>
 <li> <code>cw32.lib</code></li>
</ul>
</li>
</ol>
<p>
If all goes well, you should have a working .exe file.  The help files that come with the command line tools are missing detailed descriptions of the various compiler/linker switches.  You can download a complete help file from the Borland ftp site here:
<br>
<a href="ftp://ftp.borland.com/pub/bcppbuilder/techpubs/bcb5/b5std.zip"
>ftp://ftp.borland.com/pub/bcppbuilder/techpubs/bcb5/b5std.zip</a>
</p></TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=42><B>How do I use SDL with gcc on Windows?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>You can build and use SDL with gcc natively using either Cygwin or MinGW, or you can build a gcc cross-compiler targeting Windows from another platform.
<br>
Setting up these environments is documented at:
<a href="http://www.libsdl.org/extras/win32/gcc.html">http://www.libsdl.org/extras/win32/gcc.html</a>
<br>
Once the build environment is set up, you can build your applications as though you are on UNIX.  See the <a href="http://www.libsdl.org/faq.php?action=listentries&category=3#21">Linux FAQ</a> for more details on building applications in this environment.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=47><B>How do I use SDL with Dev-C++?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>Try the Dev-C++ tutorial available at:
<a href="http://cone3d.gamedev.net/cgi-bin/index.pl?page=tutorials/gfxsdl/tut1">http://cone3d.gamedev.net/cgi-bin/index.pl?page=tutorials/gfxsdl/tut1</a>.
<br>
If you have problems, please contact the author of the tutorial.
  </p>
There are also step by step instructions at:
<a href="http://docs.deninet.com/sdl_on_dev_c.htm">http://docs.deninet.com/sdl_on_dev_c.htm</a></TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=69><B>How do I use SDL with CodeWarrior for Windows?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>Key Swyer has contributed a set of projects for CodeWarrior 7 for Windows: <a href="faq-files/SDLCW.zip">SDLCW.zip</a>.<br>
These are not supported, but may prove useful for you.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=48><B>I get "Undefined reference to 'SDL_main'" ...</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>Make sure that you are declaring main() as:
<pre>
#include "SDL.h"

int main(int argc, char *argv[])
</pre>
You should be using main() instead of WinMain() even though you are creating a Windows application, because SDL provides a version of WinMain() which performs some SDL initialization before calling your main code.  If for some reason you need to use WinMain(), take a look at the SDL source code in src/main/win32/SDL_main.c to see what kind of initialization you need to do in your WinMain() function so that SDL works properly.</TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=58><B>I get "Undefined reference to 'WinMain@16'"</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>Under Visual C++, you need to link with SDLmain.lib.  Under the gcc build environments including Dev-C++, you need to link with the output of "sdl-config --libs", which is usually: <code>-lmingw32 -lSDLmain -lSDL -mwindows</code></TD></TR>
</TABLE>
<HR>
<TABLE cellpadding=5>
<TR><TD valign=top><B>Q:</B></TD><TD><A name=79><B>Why doesn't SDL_WM_ToggleFullScreen() work on Windows?</B></A></TD></TR>
<TR><TD valign=top><B>A:</B></TD><TD>The semantics of SDL_WM_ToggleFullScreen() are that switching between fullscreen and windowed mode is transprent to the application.  The display pixels pointer does not change, the display depth does not change, etc.  This cannot be guaranteed on Windows.  However, there is a simple method you can use to change between fullscreen and windowed mode:
<br>
<code>
flags ^= SDL_FULLSCREEN;<br>
screen = SDL_SetVideoMode(..., flags);
</code></TD></TR>
</TABLE>
<HR>
</BLOCKQUOTE>